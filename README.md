## ü§ñ Arsynox File Stream & Upload Bot

A high-performance Telegram Bot running on **Cloudflare Workers**. This bot allows users to upload files via URL, generates high-speed direct download/streaming links for Telegram files, and includes Admin broadcasting capabilities.

## üöÄ Features

- **File Streaming:** Generate direct download and streaming links for any Telegram file.
- **URL Upload:** Upload files to Telegram via direct links.
- **Speed Test:** Built-in network speed test feature.
- **Broadcast System:** Admin can send messages to all bot users (stored in Cloudflare KV).
- **Serverless:** Runs entirely on Cloudflare Workers (No VPS required).
- **Secure:** Uses Cloudflare Secrets for token management.

---

## üõ† Prerequisites

1.  **Cloudflare Account**
2.  **Telegram Bot Token** (Get from [@BotFather](https://t.me/BotFather))
3.  **Node.js & NPM** installed on your computer.
4.  **Wrangler CLI** installed (`npm install -g wrangler`)

---

## ‚öôÔ∏è Configuration

### 1. Edit `worker.js`
Open `worker.js` and update the **Hardcoded Config** section at the top:

```javascript
const BOT_OWNER = 123456789;      // YOUR Telegram User ID (for Admin commands)
const BOT_CHANNEL = -100xxxxxxxx; // YOUR Storage Channel ID (Make bot admin there)
```

### 2. Configure `wrangler.toml`
Ensure your `wrangler.toml` looks like this. **Do not** put your secrets here.

```toml
name = "arsynox-telegram-bot"
main = "worker.js"
compatibility_date = "2024-01-01"

# Database for Broadcast Feature
[[kv_namespaces]]
binding = "BOT_USERS"
id = "REPLACE_WITH_YOUR_KV_ID" 
```

---

## üì• Installation & Deployment

### Step 1: Install Dependencies
```bash
npm install
```

### Step 2: Create Database (KV)
This is required for the Broadcast feature.
```bash
npx wrangler kv:namespace create "BOT_USERS"
```
*   Copy the `id` generated by this command.
*   Paste it into your `wrangler.toml` where it says `REPLACE_WITH_YOUR_KV_ID`.

### Step 3: Set Secrets
Securely upload your tokens to Cloudflare. **Do not skip this.**

```bash
npx wrangler secret put BOT_TOKEN
# Paste your Telegram Bot Token

npx wrangler secret put BOT_SECRET
# Paste a random password (e.g., mysecret123)

npx wrangler secret put SIA_SECRET
# Paste another random password (used for link encryption)
```

### Step 4: Deploy
```bash
npx wrangler deploy
```
Copy the **Worker URL** provided at the end (e.g., `https://arsynox-bot.your-name.workers.dev`).

### Step 5: Set Webhook
Connect your bot to Telegram by visiting this URL in your browser:
```text
https://YOUR-WORKER-URL.workers.dev/setwebhook
```

---

## üéÆ Bot Commands

| Command | Description |
| :--- | :--- |
| `/start` | Start the bot and see the welcome message. |
| `/help` | Show help and instructions. |
| `/speedtest` | Perform a network speed test. |
| `/status` | Check system status. |
| `/upload` | Instructions on how to upload via URL. |
| **Admin Only** | |
| `/broadcast <msg>` | Send a message to all users in the database. |

---

## üîß Troubleshooting

**Error: "Bot Token Not Set"**
*   Make sure you ran `npx wrangler secret put BOT_TOKEN`.
*   Ensure your `wrangler.toml` does **not** have a `[vars]` section setting the token to `""`.

**Error: "ReferenceError: BOT_USERS is not defined"**
*   Make sure you created the KV Namespace in Step 2.
*   Ensure the `id` in `wrangler.toml` matches the ID from Cloudflare.

**Broadcast not working?**
*   The broadcast feature uses Cloudflare KV. It only sends messages to users who have interacted with the bot *after* you deployed the KV update.

---

## üìú License
This project is open-source. Feel free to modify and distribute.
```
